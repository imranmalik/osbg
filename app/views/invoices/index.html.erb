<%- model_class = Invoice -%>
<div style="float: left; width: 100%;">
  <%= link_to (content_tag(:span, "+") + 'NEW INVOICE'),
              new_invoice_path,
              :class => 'btn_large btn_plus' %>
  <div class="page-header header_with_margins">
    <h1><%= t '.title', :default => model_class.model_name.human.pluralize %>
      <span class="filter-tag">&nbsp;/&nbsp;Active</span>
    </h1>
  </div>
  <%= form_tag "invoices/bulk_actions", :remote => true do -%>
      <div class="action_links_wrapper">
        <div class="invoice_action_links">
          <p value="invoice" >
            <%= submit_tag "Recover", :name => "recover_archived", :class => "top_links recover_archived", :style => "display:none;" %>
            <%= submit_tag "Recover", :name => "recover_deleted", :class => "top_links recover_deleted", :style => "display:none;" %>
            <%= submit_tag "Archive", :name => "archive", :class => "top_links archive" %>
            <%= submit_tag "Delete", :name => "destroy", :class => "top_links destroy" %>
            <span>|</span>
            <a href="#" class="no_links">Copy</a>
            <a href="#" class="no_links">Print</a>
            <a href="#" class="no_links">Send</a>
            <span>|</span>
            <%= submit_tag "Enter payment", :name => "payment", :class => "top_links payment" %>
            <!--<a href="#">Pay Online</a>-->
          </p>
        </div>
        <div class="invoice_search">
          <%#= text_field_tag 'search_invoice', '', :placeholder => "Search" %>
          <div class="active_links" id="active_links">
            <%= render 'filter_links' %>
          </div>
        </div>
      </div>
      <table class="table table_listing invoice_listing">
        <thead>
        <tr>
          <th class="align_center listing-checkbox not-sortable"><%= check_box_tag 'select_all' %></th>
          <th class="align_center">Invoice</th>
          <th class="align_left">Client</th>
          <th class="align_left" width=150>Description</th>
          <th class="align_right {sorter:'thousands'}" style="padding-right: 17px;">Total</th>
          <th class="align_center">Date</th>
          <th class="align_center" style="padding-right: 17px;">Due Date</th>
          <th class="align_center">Status</th>
          <th class="align_center not-sortable"><%= t '.actions', :default => t("helpers.actions") %></th>
        </tr>
        </thead>
        <tbody id="invoice_body">
        <%= render 'invoice' %>
        <tfoot id="paging_links">
        <%= render "paging" %>
        </tfoot>
        </tbody>
      </table>
      <div class="btn_wrapper">
        <%= link_to (content_tag(:span, "+") + 'NEW INVOICE'),
                    new_invoice_path,
                    :class => 'btn_large btn_plus_bottom' %>

        <%#= link_to t('.new', :default => t("helpers.links. (content_tag(:span, "+") +  new invoice")),
                    new_invoice_path,
                    :class => 'btn_large' %>
      </div>
  <% end %>
</div>
<%= render 'pay_invoice' %>
<%# b = "" %>
<%# a = open(File.join(Rails.root, 'app', 'assets', '/stylesheets/','application.css'), 'rb') {|f| b += f.read} %>
<%#= a %>
<!-- START: invoices with payments popup -->
<%= form_tag "invoices/delete_invoices_with_payments", :remote => true do -%>
    <div id="invoices_with_payments" class="modal hide fad" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="model_grey_container">
        <div class="modal-header">
          <div id="invoice_popup_error" class="alert alert-error" style="width:635px;display:none;">
            <button  class="close" type="button" style="margin:0px;">Ã—</button>
            <span>No Invoice has been selected.</span>
          </div>
          <h1>How to handle invoice payments?</h1>
          <p>The invoice you are trying to delete has payments associated with it. You must decide what
            to do with payments before the invoice can be deleted.</p>
          <div class="cross_btn">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
              <%= image_tag "cross.png", :size => "7x7", :alt => "" %>
            </button>
          </div>
        </div>
        <div  class="modal-body">
        </div>
        <div class="footer ">
          <%= submit_tag "Convert Payment to Credit", :name => "convert_to_credit", :class => "btn_large" %>
          <%= submit_tag "Permanently Delete Payment", :name => "destroy", :class => "btn_large" %>
          or <a href="#" data-dismiss="modal">cancel</a>
        </div>
      </div>
    </div>
<% end %>
<!-- END: invoices with payments popup -->

