<%= nested_form_for @invoice, :html => { :class => 'form-horizontal' } do |f| %>
  <% @parent_f = f %>
  <div style="float:left;">
    <div class="control-group">
      <%= f.label :client_id, :class => 'control-label' %>
      <div class="controls">
        <%=collection_select :invoice, :client_id, Client.all, :id, :organization_name, {:prompt => "Select a client"},{:class => "medium"} %>
      </div>
    </div>
  </div><!-- left -->


  <div style="float:right;">
    <div class="control-group">
      <%= f.label :invoice_number, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :invoice_number, :class => 'text_field small' %>
      </div>
    </div>
    <div class="control-group">
      <%= f.label :invoice_date, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :invoice_date, :class => 'text_field small' %>
      </div>
    </div>
    <div class="control-group">
      <%= f.label :po_number, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :po_number, :class => 'text_field small' %>
      </div>
    </div>
    <div class="control-group">
      <%= f.label :discount_percentage, :class => 'control-label' %>
      <div class="controls">
        <%= f.number_field :discount_percentage, :class => 'number_field small' %>
      </div>
    </div>
  </div><!-- rigt -->

  <div class="invoice_grid_wrapper" style="">
    <table class="invoice_grid_fields" id="invoice_grid_fields">
      <thead><th></th><th>Item</th><th>Description</th><th>Unit Cost</th><th>Qty</th><th>Tax</th><th>Tax</th><th>Line Total</th></thead>
      <%= f.fields_for :invoice_line_items, :wrapper => false %>
      <tr><td><%= f.link_to_add "+", :invoice_line_items %></td></tr>
    </table>
  </div><!-- task -->

  <div class="invoice_balance">
    <table cellpadding="3" style="margin: 10px 0 5px 10px;width: 88%;">
      <tr>
        <td>Subtotal</td>
        <td><%#= f.number_field :sub_total, :class => 'number_field',:readonly => true %>
          <%= f.hidden_field :sub_total %>
          <%= label_tag '','',:id => 'invoice_sub_total_lbl' %>
        </td>
      </tr>
      <tr>
        <td>Discount</td>
        <td><%= f.hidden_field :discount_amount %>
        <%= label_tag '','',:id => 'invoice_discount_amount_lbl' %>
        </td>
      </tr>
      <tr>
        <td>Tax</td>
        <td><%= f.hidden_field :tax_amount%>
        <%= label_tag '','', :id => 'invoice_tax_amount_lbl' %>
        </td>
      </tr>
      <tr class="invoice_total">
        <td><b>Balance</b></td>
        <td><b><%#= text_field_tag 'invoice_total','0.00',:disabled => true %></b>
          <b><%= label_tag '','', :id => 'invoice_total' %></b>
        </td>
      </tr>
    </table>
  </div> <!-- invoice balance -->

  <div class="terms_notes">
    <div class="terms_div">
      <%= f.label :terms, :class => 'txt_label' %>
      <div class="txt_controls">
        <%= f.text_area :terms, :class => 'text_area', :rows => 5 %>
      </div>
    </div><!-- terms -->


    <div class="notes_div">
      <%= f.label :notes, :class => 'txt_label' %>
      <div class="txt_controls">
        <%= f.text_area :notes, :class => 'text_area', :rows => 5 %>
      </div>
    </div><!-- notes -->
  </div> <!-- Terms notes -->

  <div class="control-group" style="clear:both;">

  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
      invoices_path, :class => 'btn' %>
  </div>
<% end %>
